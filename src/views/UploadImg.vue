<template>
  <div class="img-upload">
    <ImageUploader
      name="chat-image"
      label="ç‚¹å‡»ä¸Šä¼ æˆªå›¾ æˆ– æ‹–å…¥èŠå¤©è®°å½• ðŸ“¤"
      maxFileSize="5MB"
      stylePanelAspectRatio="9:16"
      @upload="handleUploadedFile"
    />
  </div>
  <div class="confirm-button">
    <button @click="router.push({ name: 'HomePage' })">è¿”å›ž</button>
    <button @click="confirmImage">ç¡®è®¤</button>
  </div>
</template>
<script lang="ts" setup name="Result">
import { ref, reactive } from 'vue'
import ImageUploader from '@/components/ImageUploader.vue'
import { useUserDataStore } from '@/stores/userData'
import { useRouter } from 'vue-router'

const router = useRouter()
const userDataStore = useUserDataStore()

const handleUploadedFile = (file: File) => {
  console.log('æ”¶åˆ°ä¸Šä¼ çš„æ–‡ä»¶:', file)
  userDataStore.setData('image', file)
}

const confirmImage = () => {
  router.push({ name: 'Confirm' })
}
</script>
<style lang="scss" scoped>
.img-upload {
  overflow: hidden;
  padding: 0 25%;
  width: 100%;
  height: 70vh;

  v-deep .filepond--root .filepond--drop-label {
    height: 100%;
  }
}

.confirm-button {
  display: flex;
  justify-content: center;
  margin-top: 16px;
  gap: 16px;

  button {
    width: 160px;
    background-color: #4caf50;
    color: white;
    border: none;
  }
}
</style>
